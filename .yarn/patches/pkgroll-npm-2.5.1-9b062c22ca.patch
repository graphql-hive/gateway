diff --git a/dist/cli.js b/dist/cli.js
index 21de30d3e57f9f94c7899b992427724f36c0ebeb..2b505d2c425d02b7977b001b9b5e9d96f2604705 100755
--- a/dist/cli.js
+++ b/dist/cli.js
@@ -34,4 +34,4 @@
 `+" ".repeat(e)),new Array(W).fill(0).map((u,e)=>"\r"+" ".repeat(e)),new Array(W).fill(0).map((u,e)=>`\r
 `+" ".repeat(e)),new Array(W).fill(0).map((u,e)=>`
 `+"	".repeat(e)),new Array(W).fill(0).map((u,e)=>"\r"+"	".repeat(e)),new Array(W).fill(0).map((u,e)=>`\r
-`+"	".repeat(e));var nu;(function(u){u.DEFAULT={allowTrailingComma:!1}})(nu||(nu={}));function gD(u,e=[],t=nu.DEFAULT){let D=null,n=[];const r=[];function o(i){Array.isArray(n)?n.push(i):D!==null&&(n[D]=i)}return s(o,"s"),d(o,"onValue"),mD(u,{onObjectBegin:s(()=>{const i={};o(i),r.push(n),n=i,D=null},"onObjectBegin"),onObjectProperty:s(i=>{D=i},"onObjectProperty"),onObjectEnd:s(()=>{n=r.pop()},"onObjectEnd"),onArrayBegin:s(()=>{const i=[];o(i),r.push(n),n=i,D=null},"onArrayBegin"),onArrayEnd:s(()=>{n=r.pop()},"onArrayEnd"),onLiteralValue:o,onError:s((i,a,l)=>{e.push({error:i,offset:a,length:l})},"onError")},t),n[0]}s(gD,"ve"),d(gD,"parse$1");function mD(u,e,t=nu.DEFAULT){const D=dD(u,!1),n=[];function r(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(r,"o"),d(r,"toNoArgVisit");function o(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>n.slice()):()=>!0}s(o,"s"),d(o,"toNoArgVisitWithPath");function i(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(i,"c"),d(i,"toOneArgVisit");function a(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>n.slice()):()=>!0}s(a,"f"),d(a,"toOneArgVisitWithPath");const l=o(e.onObjectBegin),f=a(e.onObjectProperty),F=r(e.onObjectEnd),c=o(e.onArrayBegin),E=r(e.onArrayEnd),p=a(e.onLiteralValue),g=i(e.onSeparator),y=r(e.onComment),j=i(e.onError),v=t&&t.disallowComments,C=t&&t.allowTrailingComma;function B(){for(;;){const A=D.scan();switch(D.getTokenError()){case 4:m(14);break;case 5:m(15);break;case 3:m(13);break;case 1:v||m(11);break;case 2:m(12);break;case 6:m(16);break}switch(A){case 12:case 13:v?m(10):y();break;case 16:m(1);break;case 15:case 14:break;default:return A}}}s(B,"g"),d(B,"scanNext");function m(A,$=[],Nu=[]){if(j(A),$.length+Nu.length>0){let H=D.getToken();for(;H!==17;){if($.indexOf(H)!==-1){B();break}else if(Nu.indexOf(H)!==-1)break;H=B()}}}s(m,"m"),d(m,"handleError");function b(A){const $=D.getTokenValue();return A?p($):(f($),n.push($)),B(),!0}s(b,"_"),d(b,"parseString");function w(){switch(D.getToken()){case 11:const A=D.getTokenValue();let $=Number(A);isNaN($)&&(m(2),$=0),p($);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return B(),!0}s(w,"j"),d(w,"parseLiteral");function iu(){return D.getToken()!==10?(m(3,[],[2,5]),!1):(b(!1),D.getToken()===6?(g(":"),B(),Z()||m(4,[],[2,5])):m(5,[],[2,5]),n.pop(),!0)}s(iu,"pe"),d(iu,"parseProperty");function Pu(){l(),B();let A=!1;for(;D.getToken()!==2&&D.getToken()!==17;){if(D.getToken()===5){if(A||m(4,[],[]),g(","),B(),D.getToken()===2&&C)break}else A&&m(6,[],[]);iu()||m(4,[],[2,5]),A=!0}return F(),D.getToken()!==2?m(7,[2],[]):B(),!0}s(Pu,"me"),d(Pu,"parseObject");function Su(){c(),B();let A=!0,$=!1;for(;D.getToken()!==4&&D.getToken()!==17;){if(D.getToken()===5){if($||m(4,[],[]),g(","),B(),D.getToken()===4&&C)break}else $&&m(6,[],[]);A?(n.push(0),A=!1):n[n.length-1]++,Z()||m(4,[],[4,5]),$=!0}return E(),A||n.pop(),D.getToken()!==4?m(8,[4],[]):B(),!0}s(Su,"ge"),d(Su,"parseArray");function Z(){switch(D.getToken()){case 3:return Su();case 1:return Pu();case 10:return b(!0);default:return w()}}return s(Z,"d"),d(Z,"parseValue"),B(),D.getToken()===17?t.allowEmptyContent?!0:(m(4,[],[]),!1):Z()?(D.getToken()!==17&&m(9,[],[]),!0):(m(4,[],[]),!1)}s(mD,"Ae"),d(mD,"visit");var BD;(function(u){u[u.None=0]="None",u[u.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=2]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",u[u.InvalidUnicode=4]="InvalidUnicode",u[u.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",u[u.InvalidCharacter=6]="InvalidCharacter"})(BD||(BD={}));var AD;(function(u){u[u.OpenBraceToken=1]="OpenBraceToken",u[u.CloseBraceToken=2]="CloseBraceToken",u[u.OpenBracketToken=3]="OpenBracketToken",u[u.CloseBracketToken=4]="CloseBracketToken",u[u.CommaToken=5]="CommaToken",u[u.ColonToken=6]="ColonToken",u[u.NullKeyword=7]="NullKeyword",u[u.TrueKeyword=8]="TrueKeyword",u[u.FalseKeyword=9]="FalseKeyword",u[u.StringLiteral=10]="StringLiteral",u[u.NumericLiteral=11]="NumericLiteral",u[u.LineCommentTrivia=12]="LineCommentTrivia",u[u.BlockCommentTrivia=13]="BlockCommentTrivia",u[u.LineBreakTrivia=14]="LineBreakTrivia",u[u.Trivia=15]="Trivia",u[u.Unknown=16]="Unknown",u[u.EOF=17]="EOF"})(AD||(AD={}));const qt=gD;var yD;(function(u){u[u.InvalidSymbol=1]="InvalidSymbol",u[u.InvalidNumberFormat=2]="InvalidNumberFormat",u[u.PropertyNameExpected=3]="PropertyNameExpected",u[u.ValueExpected=4]="ValueExpected",u[u.ColonExpected=5]="ColonExpected",u[u.CommaExpected=6]="CommaExpected",u[u.CloseBraceExpected=7]="CloseBraceExpected",u[u.CloseBracketExpected=8]="CloseBracketExpected",u[u.EndOfFileExpected=9]="EndOfFileExpected",u[u.InvalidCommentToken=10]="InvalidCommentToken",u[u.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=12]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",u[u.InvalidUnicode=14]="InvalidUnicode",u[u.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",u[u.InvalidCharacter=16]="InvalidCharacter"})(yD||(yD={}));const bD=d((u,e)=>qt(Wt(e,u,"utf8")),"readJsonc"),wu=Symbol("implicitBaseUrl"),Vt=d(()=>{const{findPnpApi:u}=Lu;return u&&u(process.cwd())},"getPnpApi"),$u=d((u,e,t,D)=>{const n=`resolveFromPackageJsonPath:${u}:${e}:${t}`;if(D!=null&&D.has(n))return D.get(n);const r=bD(u,D);if(!r)return;let o=e||"tsconfig.json";if(!t&&r.exports)try{const[i]=Mt(r.exports,e,["require","types"]);o=i}catch{return!1}else!e&&r.tsconfig&&(o=r.tsconfig);return o=h.join(u,"..",o),D?.set(n,o),o},"resolveFromPackageJsonPath"),vu="package.json",xu="tsconfig.json",zt=d((u,e,t)=>{let D=u;if(u===".."&&(D=h.join(D,xu)),u[0]==="."&&(D=h.resolve(e,D)),h.isAbsolute(D)){if(O(t,D)){if(eu(t,D).isFile())return D}else if(!D.endsWith(".json")){const E=`${D}.json`;if(O(t,E))return E}return}const[n,...r]=u.split("/"),o=n[0]==="@"?`${n}/${r.shift()}`:n,i=r.join("/"),a=Vt();if(a){const{resolveRequest:E}=a;try{if(o===u){const p=E(h.join(o,vu),e);if(p){const g=$u(p,i,!1,t);if(g&&O(t,g))return g}}else{let p;try{p=E(u,e,{extensions:[".json"]})}catch{p=E(h.join(u,xu),e)}if(p)return p}}catch{}}const l=ED(h.resolve(e),h.join("node_modules",o),t);if(!l||!eu(t,l).isDirectory())return;const f=h.join(l,vu);if(O(t,f)){const E=$u(f,i,!1,t);if(E===!1)return;if(E&&O(t,E)&&eu(t,E).isFile())return E}const F=h.join(l,i),c=F.endsWith(".json");if(!c){const E=`${F}.json`;if(O(t,E))return E}if(O(t,F)){if(eu(t,F).isDirectory()){const E=h.join(F,vu);if(O(t,E)){const g=$u(E,"",!0,t);if(g&&O(t,g))return g}const p=h.join(F,xu);if(O(t,p))return p}else if(c)return F}},"resolveExtendsPath"),Gt=d((u,e,t,D)=>{const n=zt(u,e,D);if(!n)throw new Error(`File '${u}' not found.`);if(t.has(n))throw new Error(`Circularity detected while resolving configuration: ${n}`);t.add(n);const r=h.dirname(n),o=wD(n,D,t);delete o.references;const{compilerOptions:i}=o;if(i){const a=["baseUrl","outDir"];for(const l of a){const f=i[l];f&&(i[l]=k(h.relative(e,h.join(r,f)))||"./")}}return o.files&&(o.files=o.files.map(a=>k(h.relative(e,h.join(r,a))))),o.include&&(o.include=o.include.map(a=>k(h.relative(e,h.join(r,a))))),o.exclude&&(o.exclude=o.exclude.map(a=>k(h.relative(e,h.join(r,a))))),o},"resolveExtends"),wD=d((u,e,t=new Set)=>{let D;try{D=bD(u,e)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${u}`)}if(typeof D!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${u}`);const n=h.dirname(u);if(D.compilerOptions){const{compilerOptions:r}=D;r.paths&&!r.baseUrl&&(r[wu]=n)}if(D.extends){const r=Array.isArray(D.extends)?D.extends:[D.extends];delete D.extends;for(const o of r.reverse()){const i=Gt(o,n,new Set(t),e),a={...i,...D,compilerOptions:{...i.compilerOptions,...D.compilerOptions}};i.watchOptions&&(a.watchOptions={...i.watchOptions,...D.watchOptions}),D=a}}if(D.compilerOptions){const{compilerOptions:r}=D,o=["baseUrl","rootDir"];for(const a of o){const l=r[a];if(l){const f=h.resolve(n,l),F=bu(h.relative(n,f));r[a]=F}}const{outDir:i}=r;i&&(Array.isArray(D.exclude)||(D.exclude=[]),D.exclude.includes(i)||D.exclude.push(i),r.outDir=bu(i))}else D.compilerOptions={};if(D.files&&(D.files=D.files.map(bu)),D.include&&(D.include=D.include.map(k)),D.watchOptions){const{watchOptions:r}=D;r.excludeDirectories&&(r.excludeDirectories=r.excludeDirectories.map(o=>k(h.resolve(n,o))))}return D},"_parseTsconfig"),$D=d((u,e=new Map)=>wD(h.resolve(u),e),"parseTsconfig"),Kt=d((u=process.cwd(),e="tsconfig.json",t=new Map)=>{const D=ED(k(u),e,t);if(!D)return null;const n=$D(D,t);return{path:D,config:n}},"getTsconfig"),Jt=/\*/g,vD=d((u,e)=>{const t=u.match(Jt);if(t&&t.length>1)throw new Error(e)},"assertStarCount"),Zt=d(u=>{if(u.includes("*")){const[e,t]=u.split("*");return{prefix:e,suffix:t}}return u},"parsePattern"),Ht=d(({prefix:u,suffix:e},t)=>t.startsWith(u)&&t.endsWith(e),"isPatternMatch"),Yt=d((u,e,t)=>Object.entries(u).map(([D,n])=>(vD(D,`Pattern '${D}' can have at most one '*' character.`),{pattern:Zt(D),substitutions:n.map(r=>{if(vD(r,`Substitution '${r}' in pattern '${D}' can have at most one '*' character.`),!e&&!yu.test(r))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return h.resolve(t,r)})})),"parsePaths"),Qt=d(u=>{const{compilerOptions:e}=u.config;if(!e)return null;const{baseUrl:t,paths:D}=e;if(!t&&!D)return null;const n=wu in e&&e[wu],r=h.resolve(h.dirname(u.path),t||n||"."),o=D?Yt(D,t,r):[];return i=>{if(yu.test(i))return[];const a=[];for(const c of o){if(c.pattern===i)return c.substitutions.map(k);typeof c.pattern!="string"&&a.push(c)}let l,f=-1;for(const c of a)Ht(c.pattern,i)&&c.pattern.prefix.length>f&&(f=c.pattern.prefix.length,l=c);if(!l)return t?[k(h.join(r,i))]:[];const F=i.slice(l.pattern.prefix.length,i.length-l.pattern.suffix.length);return l.substitutions.map(c=>k(c.replace("*",F)))}},"createPathsMatcher"),xD=d(u=>{let e="";for(let t=0;t<u.length;t+=1){const D=u[t],n=D.toUpperCase();e+=D===n?D.toLowerCase():n}return e},"s"),Xt=65,un=97,Dn=d(()=>Math.floor(Math.random()*26),"m"),en=d(u=>Array.from({length:u},()=>String.fromCodePoint(Dn()+(Math.random()>.5?Xt:un))).join(""),"S"),tn=d((u=T)=>{const e=process.execPath;if(u.existsSync(e))return!u.existsSync(xD(e));const t=`/${en(10)}`;u.writeFileSync(t,"");const D=!u.existsSync(xD(t));return u.unlinkSync(t),D},"l"),{join:ru}=h.posix,ku={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},nn=d(u=>{const e=[...ku.ts],t=[...ku.cts],D=[...ku.mts];return u!=null&&u.allowJs&&(e.push(".js",".jsx"),t.push(".cjs"),D.push(".mjs")),[...e,...t,...D]},"getSupportedExtensions"),rn=d(u=>{const e=[];if(!u)return e;const{outDir:t,declarationDir:D}=u;return t&&e.push(t),D&&e.push(D),e},"getDefaultExcludeSpec"),kD=d(u=>u.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&"),"escapeForRegexp"),on=["node_modules","bower_components","jspm_packages"],ju=`(?!(${on.join("|")})(/|$))`,sn=/(?:^|\/)[^.*?]+$/,jD="**/*",ou="[^/]",Ou="[^./]",OD=process.platform==="win32";d(({config:u,path:e},t=tn())=>{if("extends"in u)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!h.isAbsolute(e))throw new Error("The tsconfig path must be absolute");OD&&(e=k(e));const D=h.dirname(e),{files:n,include:r,exclude:o,compilerOptions:i}=u,a=n?.map(p=>ru(D,p)),l=nn(i),f=t?"":"i",F=(o||rn(i)).map(p=>{const g=ru(D,p),y=kD(g).replaceAll("\\*\\*/","(.+/)?").replaceAll("\\*",`${ou}*`).replaceAll("\\?",ou);return new RegExp(`^${y}($|/)`,f)}),c=n||r?r:[jD],E=c?c.map(p=>{let g=ru(D,p);sn.test(g)&&(g=ru(g,jD));const y=kD(g).replaceAll("/\\*\\*",`(/${ju}${Ou}${ou}*)*?`).replaceAll(/(\/)?\\\*/g,(j,v)=>{const C=`(${Ou}|(\\.(?!min\\.js$))?)*`;return v?`/${ju}${Ou}${C}`:C}).replaceAll(/(\/)?\\\?/g,(j,v)=>{const C=ou;return v?`/${ju}${C}`:C});return new RegExp(`^${y}$`,f)}):void 0;return p=>{if(!h.isAbsolute(p))throw new Error("filePath must be absolute");if(OD&&(p=k(p)),a!=null&&a.includes(p)||!(!l.some(g=>p.endsWith(g))||F.some(g=>g.test(p)))&&E&&E.some(g=>g.test(p)))return u}},"createFilesMatcher");const TD="resolve-tsconfig-paths",an=s(u=>u[0]===".","isRelative"),ln=s(u=>u[0]==="/"||/^[\s\S]:/.test(u),"isAbsolute"),cn=s(u=>u[0]==="#","isImports"),PD=s(u=>{const e=Qt(u);return e?{name:TD,async resolveId(t,D,n){if(!D||an(t)||ln(t)||cn(t)||t.startsWith("\0"))return null;const r=e(t);for(const o of r){const i=await this.resolve(o,D,{skipSelf:!0,...n});if(i)return i}return null}}:{name:TD}},"resolveTsconfigPaths"),SD=/^#!.*/,Fn=s(()=>({name:"strip-hashbang",transform:s(u=>{if(!SD.test(u))return null;const e=new Mu(u);return e.replace(SD,""),{code:e.toString(),map:e.generateMap({hires:!0})}},"transform")}),"stripHashbang"),Cn=["peerDependencies","dependencies","optionalDependencies"],Tu="@types/",ND=s((u,e,t=!1)=>{const D=[],{devDependencies:n}=u;for(const r of Cn){const o=u[r];if(!o)continue;const i=Object.keys(o);for(const a of i)if(!(a in e))if(a.startsWith(Tu)){if(t){let l=a.slice(Tu.length);l.includes("__")&&(l=`@${l.replace("__","/")}`),D.push(l)}}else{if(n&&t){const l=Tu+a.replace("@","").replace("/","__");n[l]&&!(l in o)&&console.warn(`Recommendation: "${l}" is externalized because "${a}" is in "${r}". Place "${l}" in "${r}" as well so users don't have missing types.`)}D.push(a)}}return D.flatMap(r=>[r,new RegExp(`^${r}/`)])},"getExternalDependencies"),ID=s(u=>u.split("?")[0],"stripQuery"),_D={type:s(async(u,e)=>{const[t,D]=await Promise.all([Promise.resolve().then(function(){return require("./rollup-plugin-dts-Bhb-wA8a.js")}),Promise.resolve().then(function(){return require("./local-typescript-loader-CmIewcVg.js")}).then(function(n){return n.localTypescriptLoader})]);return{input:[],preserveEntrySignatures:"strict",plugins:[cD(u),...e?[PD(e)]:[],FD(),t.default({respectExternal:!0,compilerOptions:{composite:!1,preserveSymlinks:!1,module:D.default.ModuleKind.Preserve,moduleResolution:D.default.ModuleResolutionKind.Bundler},tsconfig:e?.path})],output:[],external:[]}},"type"),app:s((u,e,t,D,n)=>{const r={target:u.target,tsconfigRaw:n?.config};return{input:[],preserveEntrySignatures:"strict",plugins:[cD(u),...n?[PD(n)]:[],FD(),ZD({entries:e}),GD({extensions:[".mjs",".js",".ts",".jsx",".tsx",".json"],exportConditions:u.exportCondition}),...Object.keys(t).length>0?[_u({preventAssignment:!0,objectGuards:!0,values:t})]:[],Fn(),KD(),JD(),xt(r),$t(),...u.minify?[jt(r)]:[],Ot(D)],output:[],external:[]}},"app")},fn=s(async(u,e,t,D,n,r,o)=>{const i=t.filter(({exportEntry:c})=>c.isExecutable).map(({exportEntry:c})=>c.outputPath),a=Object.create(null),l=Object.fromEntries(D.env.map(({key:c,value:E})=>[`process.env.${c}`,JSON.stringify(E)])),f=ND(r,n),F=ND(r,n,!0);for(const{input:c,srcExtension:E,distExtension:p,exportEntry:g}of t){if(g.type==="types"){let B=a.type;B||(B=await _D.type(D,o),B.external=F,a.type=B),B.input.includes(c)||B.input.push(c),B.output.push({dir:e,entryFileNames:s(m=>T.realpathSync.native(ID(m.facadeModuleId)).slice(u.length,-E.length)+p,"entryFileNames"),exports:"auto",format:"esm"});continue}let y=a.app;y||(y=_D.app(D,n,l,i,o),y.external=f,a.app=y),y.input.includes(c)||y.input.push(c);const j=y.output,v=h.extname(g.outputPath),C=`${g.type}-${v}`;if(!j[C]){const B={dir:e,exports:"auto",format:g.type,chunkFileNames:`[name]-[hash]${v}`,sourcemap:D.sourcemap,plugins:[vt(g.type==="module")],entryFileNames:s(m=>{const w=T.realpathSync.native(ID(m.facadeModuleId)).slice(u.length);return h.join(h.dirname(w),m.name)+p},"entryFileNames")};j.push(B),j[C]=B}}return a},"getRollupConfigs"),pn=s(u=>{if(!u)return Kt();const e=h.resolve(u),t=$D(e);return{path:e,config:t}},"getTsconfig");let _=!0;const q=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let K=0;if(q.process&&q.process.env&&q.process.stdout){const{FORCE_COLOR:u,NODE_DISABLE_COLORS:e,NO_COLOR:t,TERM:D,COLORTERM:n}=q.process.env;e||t||u==="0"?_=!1:u==="1"||u==="2"||u==="3"?_=!0:D==="dumb"?_=!1:"CI"in q.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in q.process.env)?_=!0:_=process.stdout.isTTY,_&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?K=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?K=2:K=1)}let RD={enabled:_,supportLevel:K};function En(u,e,t=1){const D=`\x1B[${u}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return o=>RD.enabled&&RD.supportLevel>=t?D+(""+o).replace(r,D)+n:""+o}s(En,"kolorist");const dn=En(90,39),hn=s(()=>new Date().toLocaleTimeString(),"currentTime"),su=s((...u)=>console.log(`[${dn(hn())}]`,...u),"log"),gn=s(async u=>{await Eu(u)&&await T.promises.rm(u,{recursive:!0,force:!0})},"cleanDist"),{stringify:LD}=JSON,R=Et({name:"pkgroll",version:dt,flags:{src:{type:String,description:"Source directory",default:"./src"},dist:{type:String,description:"Distribution directory",default:"./dist"},minify:{type:Boolean,description:"Minify output",alias:"m",default:!1},target:{type:[String],default:[`node${process.versions.node}`],description:"Environments to support. `target` in tsconfig.json is automatically added. Defaults to the current Node.js version.",alias:"t"},tsconfig:{type:String,description:"Custom tsconfig.json file path",alias:"p"},watch:{type:Boolean,description:"Watch mode",alias:"w",default:!1},env:{type:[u=>{const[e,t]=u.split("=");return{key:e,value:t}}],description:"Compile-time environment variables (eg. --env.NODE_ENV=production)"},exportCondition:{type:[String],description:"Export conditions for resolving dependency export and import maps (eg. --export-condition=node)"},sourcemap:{type:s(u=>{if(u==="")return!0;if(u==="inline")return u;throw new Error(`Invalid sourcemap option ${LD(u)}`)},"type"),description:"Sourcemap generation. Provide `inline` option for inline sourcemap (eg. --sourcemap, --sourcemap=inline)"},cleanDist:{type:Boolean,description:"Clean dist before bundling",default:!1}},help:{description:"Minimalistic package bundler",render:s((u,e)=>(e.flagOperator=t=>t.name==="env"?".key=":" ",e.render(u)),"render")}}),MD=process.cwd(),UD=Du(R.flags.src,!0),J=Du(R.flags.dist,!0),WD=pn(R.flags.tsconfig),qD=WD?.config.compilerOptions?.target;qD&&R.flags.target.push(qD),(async()=>{const u=await ht(MD);let e=mt(u);if(e=e.filter(n=>{const r=n.outputPath.startsWith(J);return r||console.warn(`Ignoring entry outside of ${J} directory: package.json#${n.from}=${LD(n.outputPath)}`),r}),e.length===0)throw new Error("No export entries found in package.json");const t=await Promise.all(e.map(async n=>({...await wt(n,UD,J),exportEntry:n}))),D=await fn(Du(T.realpathSync.native(UD),!0),J,t,R.flags,Bt(u,MD),u,WD);R.flags.cleanDist&&await gn(J),R.flags.watch?(su("Watch initialized"),Object.values(D).map(async n=>{Iu.watch(n).on("event",async o=>{o.code==="BUNDLE_START"&&su("Building",...Array.isArray(o.input)?o.input:[o.input]),o.code==="BUNDLE_END"&&(await Promise.all(n.output.map(i=>o.result.write(i))),su("Built",...Array.isArray(o.input)?o.input:[o.input])),o.code==="ERROR"&&su("Error:",o.error.message)})})):await Promise.all(Object.values(D).map(async n=>{const r=await Iu.rollup(n);return Promise.all(n.output.map(o=>r.write(o)))}))})().catch(u=>{console.error(u),process.exit(1)});
+`+"	".repeat(e));var nu;(function(u){u.DEFAULT={allowTrailingComma:!1}})(nu||(nu={}));function gD(u,e=[],t=nu.DEFAULT){let D=null,n=[];const r=[];function o(i){Array.isArray(n)?n.push(i):D!==null&&(n[D]=i)}return s(o,"s"),d(o,"onValue"),mD(u,{onObjectBegin:s(()=>{const i={};o(i),r.push(n),n=i,D=null},"onObjectBegin"),onObjectProperty:s(i=>{D=i},"onObjectProperty"),onObjectEnd:s(()=>{n=r.pop()},"onObjectEnd"),onArrayBegin:s(()=>{const i=[];o(i),r.push(n),n=i,D=null},"onArrayBegin"),onArrayEnd:s(()=>{n=r.pop()},"onArrayEnd"),onLiteralValue:o,onError:s((i,a,l)=>{e.push({error:i,offset:a,length:l})},"onError")},t),n[0]}s(gD,"ve"),d(gD,"parse$1");function mD(u,e,t=nu.DEFAULT){const D=dD(u,!1),n=[];function r(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(r,"o"),d(r,"toNoArgVisit");function o(A){return A?()=>A(D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>n.slice()):()=>!0}s(o,"s"),d(o,"toNoArgVisitWithPath");function i(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter()):()=>!0}s(i,"c"),d(i,"toOneArgVisit");function a(A){return A?$=>A($,D.getTokenOffset(),D.getTokenLength(),D.getTokenStartLine(),D.getTokenStartCharacter(),()=>n.slice()):()=>!0}s(a,"f"),d(a,"toOneArgVisitWithPath");const l=o(e.onObjectBegin),f=a(e.onObjectProperty),F=r(e.onObjectEnd),c=o(e.onArrayBegin),E=r(e.onArrayEnd),p=a(e.onLiteralValue),g=i(e.onSeparator),y=r(e.onComment),j=i(e.onError),v=t&&t.disallowComments,C=t&&t.allowTrailingComma;function B(){for(;;){const A=D.scan();switch(D.getTokenError()){case 4:m(14);break;case 5:m(15);break;case 3:m(13);break;case 1:v||m(11);break;case 2:m(12);break;case 6:m(16);break}switch(A){case 12:case 13:v?m(10):y();break;case 16:m(1);break;case 15:case 14:break;default:return A}}}s(B,"g"),d(B,"scanNext");function m(A,$=[],Nu=[]){if(j(A),$.length+Nu.length>0){let H=D.getToken();for(;H!==17;){if($.indexOf(H)!==-1){B();break}else if(Nu.indexOf(H)!==-1)break;H=B()}}}s(m,"m"),d(m,"handleError");function b(A){const $=D.getTokenValue();return A?p($):(f($),n.push($)),B(),!0}s(b,"_"),d(b,"parseString");function w(){switch(D.getToken()){case 11:const A=D.getTokenValue();let $=Number(A);isNaN($)&&(m(2),$=0),p($);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return B(),!0}s(w,"j"),d(w,"parseLiteral");function iu(){return D.getToken()!==10?(m(3,[],[2,5]),!1):(b(!1),D.getToken()===6?(g(":"),B(),Z()||m(4,[],[2,5])):m(5,[],[2,5]),n.pop(),!0)}s(iu,"pe"),d(iu,"parseProperty");function Pu(){l(),B();let A=!1;for(;D.getToken()!==2&&D.getToken()!==17;){if(D.getToken()===5){if(A||m(4,[],[]),g(","),B(),D.getToken()===2&&C)break}else A&&m(6,[],[]);iu()||m(4,[],[2,5]),A=!0}return F(),D.getToken()!==2?m(7,[2],[]):B(),!0}s(Pu,"me"),d(Pu,"parseObject");function Su(){c(),B();let A=!0,$=!1;for(;D.getToken()!==4&&D.getToken()!==17;){if(D.getToken()===5){if($||m(4,[],[]),g(","),B(),D.getToken()===4&&C)break}else $&&m(6,[],[]);A?(n.push(0),A=!1):n[n.length-1]++,Z()||m(4,[],[4,5]),$=!0}return E(),A||n.pop(),D.getToken()!==4?m(8,[4],[]):B(),!0}s(Su,"ge"),d(Su,"parseArray");function Z(){switch(D.getToken()){case 3:return Su();case 1:return Pu();case 10:return b(!0);default:return w()}}return s(Z,"d"),d(Z,"parseValue"),B(),D.getToken()===17?t.allowEmptyContent?!0:(m(4,[],[]),!1):Z()?(D.getToken()!==17&&m(9,[],[]),!0):(m(4,[],[]),!1)}s(mD,"Ae"),d(mD,"visit");var BD;(function(u){u[u.None=0]="None",u[u.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=2]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",u[u.InvalidUnicode=4]="InvalidUnicode",u[u.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",u[u.InvalidCharacter=6]="InvalidCharacter"})(BD||(BD={}));var AD;(function(u){u[u.OpenBraceToken=1]="OpenBraceToken",u[u.CloseBraceToken=2]="CloseBraceToken",u[u.OpenBracketToken=3]="OpenBracketToken",u[u.CloseBracketToken=4]="CloseBracketToken",u[u.CommaToken=5]="CommaToken",u[u.ColonToken=6]="ColonToken",u[u.NullKeyword=7]="NullKeyword",u[u.TrueKeyword=8]="TrueKeyword",u[u.FalseKeyword=9]="FalseKeyword",u[u.StringLiteral=10]="StringLiteral",u[u.NumericLiteral=11]="NumericLiteral",u[u.LineCommentTrivia=12]="LineCommentTrivia",u[u.BlockCommentTrivia=13]="BlockCommentTrivia",u[u.LineBreakTrivia=14]="LineBreakTrivia",u[u.Trivia=15]="Trivia",u[u.Unknown=16]="Unknown",u[u.EOF=17]="EOF"})(AD||(AD={}));const qt=gD;var yD;(function(u){u[u.InvalidSymbol=1]="InvalidSymbol",u[u.InvalidNumberFormat=2]="InvalidNumberFormat",u[u.PropertyNameExpected=3]="PropertyNameExpected",u[u.ValueExpected=4]="ValueExpected",u[u.ColonExpected=5]="ColonExpected",u[u.CommaExpected=6]="CommaExpected",u[u.CloseBraceExpected=7]="CloseBraceExpected",u[u.CloseBracketExpected=8]="CloseBracketExpected",u[u.EndOfFileExpected=9]="EndOfFileExpected",u[u.InvalidCommentToken=10]="InvalidCommentToken",u[u.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",u[u.UnexpectedEndOfString=12]="UnexpectedEndOfString",u[u.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",u[u.InvalidUnicode=14]="InvalidUnicode",u[u.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",u[u.InvalidCharacter=16]="InvalidCharacter"})(yD||(yD={}));const bD=d((u,e)=>qt(Wt(e,u,"utf8")),"readJsonc"),wu=Symbol("implicitBaseUrl"),Vt=d(()=>{const{findPnpApi:u}=Lu;return u&&u(process.cwd())},"getPnpApi"),$u=d((u,e,t,D)=>{const n=`resolveFromPackageJsonPath:${u}:${e}:${t}`;if(D!=null&&D.has(n))return D.get(n);const r=bD(u,D);if(!r)return;let o=e||"tsconfig.json";if(!t&&r.exports)try{const[i]=Mt(r.exports,e,["require","types"]);o=i}catch{return!1}else!e&&r.tsconfig&&(o=r.tsconfig);return o=h.join(u,"..",o),D?.set(n,o),o},"resolveFromPackageJsonPath"),vu="package.json",xu="tsconfig.json",zt=d((u,e,t)=>{let D=u;if(u===".."&&(D=h.join(D,xu)),u[0]==="."&&(D=h.resolve(e,D)),h.isAbsolute(D)){if(O(t,D)){if(eu(t,D).isFile())return D}else if(!D.endsWith(".json")){const E=`${D}.json`;if(O(t,E))return E}return}const[n,...r]=u.split("/"),o=n[0]==="@"?`${n}/${r.shift()}`:n,i=r.join("/"),a=Vt();if(a){const{resolveRequest:E}=a;try{if(o===u){const p=E(h.join(o,vu),e);if(p){const g=$u(p,i,!1,t);if(g&&O(t,g))return g}}else{let p;try{p=E(u,e,{extensions:[".json"]})}catch{p=E(h.join(u,xu),e)}if(p)return p}}catch{}}const l=ED(h.resolve(e),h.join("node_modules",o),t);if(!l||!eu(t,l).isDirectory())return;const f=h.join(l,vu);if(O(t,f)){const E=$u(f,i,!1,t);if(E===!1)return;if(E&&O(t,E)&&eu(t,E).isFile())return E}const F=h.join(l,i),c=F.endsWith(".json");if(!c){const E=`${F}.json`;if(O(t,E))return E}if(O(t,F)){if(eu(t,F).isDirectory()){const E=h.join(F,vu);if(O(t,E)){const g=$u(E,"",!0,t);if(g&&O(t,g))return g}const p=h.join(F,xu);if(O(t,p))return p}else if(c)return F}},"resolveExtendsPath"),Gt=d((u,e,t,D)=>{const n=zt(u,e,D);if(!n)throw new Error(`File '${u}' not found.`);if(t.has(n))throw new Error(`Circularity detected while resolving configuration: ${n}`);t.add(n);const r=h.dirname(n),o=wD(n,D,t);delete o.references;const{compilerOptions:i}=o;if(i){const a=["baseUrl","outDir"];for(const l of a){const f=i[l];f&&(i[l]=k(h.relative(e,h.join(r,f)))||"./")}}return o.files&&(o.files=o.files.map(a=>k(h.relative(e,h.join(r,a))))),o.include&&(o.include=o.include.map(a=>k(h.relative(e,h.join(r,a))))),o.exclude&&(o.exclude=o.exclude.map(a=>k(h.relative(e,h.join(r,a))))),o},"resolveExtends"),wD=d((u,e,t=new Set)=>{let D;try{D=bD(u,e)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${u}`)}if(typeof D!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${u}`);const n=h.dirname(u);if(D.compilerOptions){const{compilerOptions:r}=D;r.paths&&!r.baseUrl&&(r[wu]=n)}if(D.extends){const r=Array.isArray(D.extends)?D.extends:[D.extends];delete D.extends;for(const o of r.reverse()){const i=Gt(o,n,new Set(t),e),a={...i,...D,compilerOptions:{...i.compilerOptions,...D.compilerOptions}};i.watchOptions&&(a.watchOptions={...i.watchOptions,...D.watchOptions}),D=a}}if(D.compilerOptions){const{compilerOptions:r}=D,o=["baseUrl","rootDir"];for(const a of o){const l=r[a];if(l){const f=h.resolve(n,l),F=bu(h.relative(n,f));r[a]=F}}const{outDir:i}=r;i&&(Array.isArray(D.exclude)||(D.exclude=[]),D.exclude.includes(i)||D.exclude.push(i),r.outDir=bu(i))}else D.compilerOptions={};if(D.files&&(D.files=D.files.map(bu)),D.include&&(D.include=D.include.map(k)),D.watchOptions){const{watchOptions:r}=D;r.excludeDirectories&&(r.excludeDirectories=r.excludeDirectories.map(o=>k(h.resolve(n,o))))}return D},"_parseTsconfig"),$D=d((u,e=new Map)=>wD(h.resolve(u),e),"parseTsconfig"),Kt=d((u=process.cwd(),e="tsconfig.json",t=new Map)=>{const D=ED(k(u),e,t);if(!D)return null;const n=$D(D,t);return{path:D,config:n}},"getTsconfig"),Jt=/\*/g,vD=d((u,e)=>{const t=u.match(Jt);if(t&&t.length>1)throw new Error(e)},"assertStarCount"),Zt=d(u=>{if(u.includes("*")){const[e,t]=u.split("*");return{prefix:e,suffix:t}}return u},"parsePattern"),Ht=d(({prefix:u,suffix:e},t)=>t.startsWith(u)&&t.endsWith(e),"isPatternMatch"),Yt=d((u,e,t)=>Object.entries(u).map(([D,n])=>(vD(D,`Pattern '${D}' can have at most one '*' character.`),{pattern:Zt(D),substitutions:n.map(r=>{if(vD(r,`Substitution '${r}' in pattern '${D}' can have at most one '*' character.`),!e&&!yu.test(r))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return h.resolve(t,r)})})),"parsePaths"),Qt=d(u=>{const{compilerOptions:e}=u.config;if(!e)return null;const{baseUrl:t,paths:D}=e;if(!t&&!D)return null;const n=wu in e&&e[wu],r=h.resolve(h.dirname(u.path),t||n||"."),o=D?Yt(D,t,r):[];return i=>{if(yu.test(i))return[];const a=[];for(const c of o){if(c.pattern===i)return c.substitutions.map(k);typeof c.pattern!="string"&&a.push(c)}let l,f=-1;for(const c of a)Ht(c.pattern,i)&&c.pattern.prefix.length>f&&(f=c.pattern.prefix.length,l=c);if(!l)return t?[k(h.join(r,i))]:[];const F=i.slice(l.pattern.prefix.length,i.length-l.pattern.suffix.length);return l.substitutions.map(c=>k(c.replace("*",F)))}},"createPathsMatcher"),xD=d(u=>{let e="";for(let t=0;t<u.length;t+=1){const D=u[t],n=D.toUpperCase();e+=D===n?D.toLowerCase():n}return e},"s"),Xt=65,un=97,Dn=d(()=>Math.floor(Math.random()*26),"m"),en=d(u=>Array.from({length:u},()=>String.fromCodePoint(Dn()+(Math.random()>.5?Xt:un))).join(""),"S"),tn=d((u=T)=>{const e=process.execPath;if(u.existsSync(e))return!u.existsSync(xD(e));const t=`/${en(10)}`;u.writeFileSync(t,"");const D=!u.existsSync(xD(t));return u.unlinkSync(t),D},"l"),{join:ru}=h.posix,ku={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},nn=d(u=>{const e=[...ku.ts],t=[...ku.cts],D=[...ku.mts];return u!=null&&u.allowJs&&(e.push(".js",".jsx"),t.push(".cjs"),D.push(".mjs")),[...e,...t,...D]},"getSupportedExtensions"),rn=d(u=>{const e=[];if(!u)return e;const{outDir:t,declarationDir:D}=u;return t&&e.push(t),D&&e.push(D),e},"getDefaultExcludeSpec"),kD=d(u=>u.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&"),"escapeForRegexp"),on=["node_modules","bower_components","jspm_packages"],ju=`(?!(${on.join("|")})(/|$))`,sn=/(?:^|\/)[^.*?]+$/,jD="**/*",ou="[^/]",Ou="[^./]",OD=process.platform==="win32";d(({config:u,path:e},t=tn())=>{if("extends"in u)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!h.isAbsolute(e))throw new Error("The tsconfig path must be absolute");OD&&(e=k(e));const D=h.dirname(e),{files:n,include:r,exclude:o,compilerOptions:i}=u,a=n?.map(p=>ru(D,p)),l=nn(i),f=t?"":"i",F=(o||rn(i)).map(p=>{const g=ru(D,p),y=kD(g).replaceAll("\\*\\*/","(.+/)?").replaceAll("\\*",`${ou}*`).replaceAll("\\?",ou);return new RegExp(`^${y}($|/)`,f)}),c=n||r?r:[jD],E=c?c.map(p=>{let g=ru(D,p);sn.test(g)&&(g=ru(g,jD));const y=kD(g).replaceAll("/\\*\\*",`(/${ju}${Ou}${ou}*)*?`).replaceAll(/(\/)?\\\*/g,(j,v)=>{const C=`(${Ou}|(\\.(?!min\\.js$))?)*`;return v?`/${ju}${Ou}${C}`:C}).replaceAll(/(\/)?\\\?/g,(j,v)=>{const C=ou;return v?`/${ju}${C}`:C});return new RegExp(`^${y}$`,f)}):void 0;return p=>{if(!h.isAbsolute(p))throw new Error("filePath must be absolute");if(OD&&(p=k(p)),a!=null&&a.includes(p)||!(!l.some(g=>p.endsWith(g))||F.some(g=>g.test(p)))&&E&&E.some(g=>g.test(p)))return u}},"createFilesMatcher");const TD="resolve-tsconfig-paths",an=s(u=>u[0]===".","isRelative"),ln=s(u=>u[0]==="/"||/^[\s\S]:/.test(u),"isAbsolute"),cn=s(u=>u[0]==="#","isImports"),PD=s(u=>{const e=Qt(u);return e?{name:TD,async resolveId(t,D,n){if(!D||an(t)||ln(t)||cn(t)||t.startsWith("\0"))return null;const r=e(t);for(const o of r){const i=await this.resolve(o,D,{skipSelf:!0,...n});if(i)return i}return null}}:{name:TD}},"resolveTsconfigPaths"),SD=/^#!.*/,Fn=s(()=>({name:"strip-hashbang",transform:s(u=>{if(!SD.test(u))return null;const e=new Mu(u);return e.replace(SD,""),{code:e.toString(),map:e.generateMap({hires:!0})}},"transform")}),"stripHashbang"),Cn=["peerDependencies","dependencies","optionalDependencies"],Tu="@types/",ND=s((u,e,t=!1)=>{const D=[],{devDependencies:n}=u;for(const r of Cn){const o=u[r];if(!o)continue;const i=Object.keys(o);for(const a of i)if(!(a in e))if(a.startsWith(Tu)){if(t){let l=a.slice(Tu.length);l.includes("__")&&(l=`@${l.replace("__","/")}`),D.push(l)}}else{if(n&&t){const l=Tu+a.replace("@","").replace("/","__");n[l]&&!(l in o)&&console.warn(`Recommendation: "${l}" is externalized because "${a}" is in "${r}". Place "${l}" in "${r}" as well so users don't have missing types.`)}D.push(a)}}return D.flatMap(r=>[r,new RegExp(`^${r}/`)])},"getExternalDependencies"),ID=s(u=>u.split("?")[0],"stripQuery"),_D={type:s(async(u,e)=>{const[t,D]=await Promise.all([Promise.resolve().then(function(){return require("./rollup-plugin-dts-Bhb-wA8a.js")}),Promise.resolve().then(function(){return require("./local-typescript-loader-CmIewcVg.js")}).then(function(n){return n.localTypescriptLoader})]);return{input:[],preserveEntrySignatures:"strict",plugins:[cD(u),...e?[PD(e)]:[],FD(),t.default({respectExternal:!1,compilerOptions:{composite:!1,preserveSymlinks:!1,module:D.default.ModuleKind.Preserve,moduleResolution:D.default.ModuleResolutionKind.Bundler},tsconfig:e?.path})],output:[],external:[]}},"type"),app:s((u,e,t,D,n)=>{const r={target:u.target,tsconfigRaw:n?.config};return{input:[],preserveEntrySignatures:"strict",plugins:[cD(u),...n?[PD(n)]:[],FD(),ZD({entries:e}),GD({extensions:[".mjs",".js",".ts",".jsx",".tsx",".json"],exportConditions:u.exportCondition}),...Object.keys(t).length>0?[_u({preventAssignment:!0,objectGuards:!0,values:t})]:[],Fn(),KD(),JD(),xt(r),$t(),...u.minify?[jt(r)]:[],Ot(D)],output:[],external:[]}},"app")},fn=s(async(u,e,t,D,n,r,o)=>{const i=t.filter(({exportEntry:c})=>c.isExecutable).map(({exportEntry:c})=>c.outputPath),a=Object.create(null),l=Object.fromEntries(D.env.map(({key:c,value:E})=>[`process.env.${c}`,JSON.stringify(E)])),f=ND(r,n),F=ND(r,n,!0);for(const{input:c,srcExtension:E,distExtension:p,exportEntry:g}of t){if(g.type==="types"){let B=a.type;B||(B=await _D.type(D,o),B.external=F,a.type=B),B.input.includes(c)||B.input.push(c),B.output.push({dir:e,entryFileNames:s(m=>T.realpathSync.native(ID(m.facadeModuleId)).slice(u.length,-E.length)+p,"entryFileNames"),exports:"auto",format:"esm"});continue}let y=a.app;y||(y=_D.app(D,n,l,i,o),y.external=f,a.app=y),y.input.includes(c)||y.input.push(c);const j=y.output,v=h.extname(g.outputPath),C=`${g.type}-${v}`;if(!j[C]){const B={dir:e,exports:"auto",format:g.type,chunkFileNames:`[name]-[hash]${v}`,sourcemap:D.sourcemap,plugins:[vt(g.type==="module")],entryFileNames:s(m=>{const w=T.realpathSync.native(ID(m.facadeModuleId)).slice(u.length);return h.join(h.dirname(w),m.name)+p},"entryFileNames"),interop:"auto"};j.push(B),j[C]=B}}return a},"getRollupConfigs"),pn=s(u=>{if(!u)return Kt();const e=h.resolve(u),t=$D(e);return{path:e,config:t}},"getTsconfig");let _=!0;const q=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let K=0;if(q.process&&q.process.env&&q.process.stdout){const{FORCE_COLOR:u,NODE_DISABLE_COLORS:e,NO_COLOR:t,TERM:D,COLORTERM:n}=q.process.env;e||t||u==="0"?_=!1:u==="1"||u==="2"||u==="3"?_=!0:D==="dumb"?_=!1:"CI"in q.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in q.process.env)?_=!0:_=process.stdout.isTTY,_&&(process.platform==="win32"||n&&(n==="truecolor"||n==="24bit")?K=3:D&&(D.endsWith("-256color")||D.endsWith("256"))?K=2:K=1)}let RD={enabled:_,supportLevel:K};function En(u,e,t=1){const D=`\x1B[${u}m`,n=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return o=>RD.enabled&&RD.supportLevel>=t?D+(""+o).replace(r,D)+n:""+o}s(En,"kolorist");const dn=En(90,39),hn=s(()=>new Date().toLocaleTimeString(),"currentTime"),su=s((...u)=>console.log(`[${dn(hn())}]`,...u),"log"),gn=s(async u=>{await Eu(u)&&await T.promises.rm(u,{recursive:!0,force:!0})},"cleanDist"),{stringify:LD}=JSON,R=Et({name:"pkgroll",version:dt,flags:{src:{type:String,description:"Source directory",default:"./src"},dist:{type:String,description:"Distribution directory",default:"./dist"},minify:{type:Boolean,description:"Minify output",alias:"m",default:!1},target:{type:[String],default:[`node${process.versions.node}`],description:"Environments to support. `target` in tsconfig.json is automatically added. Defaults to the current Node.js version.",alias:"t"},tsconfig:{type:String,description:"Custom tsconfig.json file path",alias:"p"},watch:{type:Boolean,description:"Watch mode",alias:"w",default:!1},env:{type:[u=>{const[e,t]=u.split("=");return{key:e,value:t}}],description:"Compile-time environment variables (eg. --env.NODE_ENV=production)"},exportCondition:{type:[String],description:"Export conditions for resolving dependency export and import maps (eg. --export-condition=node)"},sourcemap:{type:s(u=>{if(u==="")return!0;if(u==="inline")return u;throw new Error(`Invalid sourcemap option ${LD(u)}`)},"type"),description:"Sourcemap generation. Provide `inline` option for inline sourcemap (eg. --sourcemap, --sourcemap=inline)"},cleanDist:{type:Boolean,description:"Clean dist before bundling",default:!1}},help:{description:"Minimalistic package bundler",render:s((u,e)=>(e.flagOperator=t=>t.name==="env"?".key=":" ",e.render(u)),"render")}}),MD=process.cwd(),UD=Du(R.flags.src,!0),J=Du(R.flags.dist,!0),WD=pn(R.flags.tsconfig),qD=WD?.config.compilerOptions?.target;qD&&R.flags.target.push(qD),(async()=>{const u=await ht(MD);let e=mt(u);if(e=e.filter(n=>{const r=n.outputPath.startsWith(J);return r||console.warn(`Ignoring entry outside of ${J} directory: package.json#${n.from}=${LD(n.outputPath)}`),r}),e.length===0)throw new Error("No export entries found in package.json");const t=await Promise.all(e.map(async n=>({...await wt(n,UD,J),exportEntry:n}))),D=await fn(Du(T.realpathSync.native(UD),!0),J,t,R.flags,Bt(u,MD),u,WD);R.flags.cleanDist&&await gn(J),R.flags.watch?(su("Watch initialized"),Object.values(D).map(async n=>{Iu.watch(n).on("event",async o=>{o.code==="BUNDLE_START"&&su("Building",...Array.isArray(o.input)?o.input:[o.input]),o.code==="BUNDLE_END"&&(await Promise.all(n.output.map(i=>o.result.write(i))),su("Built",...Array.isArray(o.input)?o.input:[o.input])),o.code==="ERROR"&&su("Error:",o.error.message)})})):await Promise.all(Object.values(D).map(async n=>{const r=await Iu.rollup(n);return Promise.all(n.output.map(o=>r.write(o)))}))})().catch(u=>{console.error(u),process.exit(1)});
