{
  "$schema": "https://codesandbox.io/schemas/tasks.json",
  "setupTasks": [
    {
      "name": "Install",
      "command": "npm i"
    },
    {
      "name": "Service bar",
      "command": "npm run service:bar &"
    },
    {
      "name": "Wait for service bar",
      "command": "curl --retry-connrefused --retry 5 --retry-delay 1 http://localhost:4001"
    },
    {
      "name": "Service foo",
      "command": "npm run service:foo &"
    },
    {
      "name": "Wait for service foo",
      "command": "curl --retry-connrefused --retry 5 --retry-delay 1 http://localhost:4002"
    },
    {
      "name": "Compose",
      "command": "npm run compose"
    }
  ],
  "tasks": {
    "gateway": {
      "name": "Start Hive Gateway",
      "runAtStart": true,
      "command": "npm run gateway",
      "preview": {
        "port": 4000
      }
    }
  }
}
